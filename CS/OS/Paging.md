# 가상메모리/페이지 교체란?

> 가상 메모리: 시스템이 실제 물리적 메모리보다 더 큰 메모리 공간을 제공하는 기술. 프로세스가 사용하는 주소 공간을 가상적으로 확장하여 메모리 사용 효율을 높인다.

> 페이지 교체: 물리 메모리가 부족할 때, 운영 체제가 덜 사용되는 페이지를 제거하고 필요한 페이지를 메모리에 로드하는 과정.

## 프로세스의 가상메모리를 이용한 메모리할당 방법
- 프로세스는 자신이 사용할 수 있는 메모리를 표시할 수 있는 가상메모리를 운영체제로 부터 4GB를 할당받는다
- 32bit 시절부터 사용되온 관례(현대 프로그램, OS도 이에 최적화 되어있음)때문에 4gb를 할당(논리적)받는다, 그 이유는 32비트가 4gb의 메모리 밖에 표시할 수 없기 때문이다
    - 2^12(4kb, offset) , 2^20(address) 로 32비트로 4gb의 위치를 매핑할 수 있다


## RAM의 메모리 할당 알고리즘: Paging

RAM의 페이지는 가상 메모리 관리에서 중요한 개념으로, 물리 메모리와 가상 주소 공간 간의 데이터를 효과적으로 관리하기 위해 사용된다.

- 정의 : 페이지는 고정된 크기의 메모리 블록으로, 일반적으로 4KB에서 8KB의 크기를 가진다. 가상 메모리의 각 프로세스는 이러한 페이지로 나누어지며, 각 페이지는 물리 메모리의 특정 위치에 매핑된다.
- 가상 주소 공간: 각 프로세스는 독립적인 가상 주소 공간을 가지며, 이 공간은 여러 개의 페이지로 나뉘어 있다. 프로세스가 실행될 때, 필요한 페이지만 물리 메모리에 로드된다.
- 페이지 테이블 매핑 정보: 운영 체제는 페이지 테이블을 통해 가상 주소와 물리 주소 간의 매핑 정보를 관리한다. 각 프로세스는 자신만의 페이지 테이블을 가지고 있어, 가상 주소를 물리 주소로 변환하는 데 사용된다.
- 페이지 교체를 통한 메모리 관리: RAM의 물리적 용량이 부족할 경우, 운영 체제는 페이지 교체 알고리즘(예: LRU, FIFO 등)을 사용하여 덜 사용되는 페이지를 디스크의 스왑 공간으로 이동시키고 필요한 페이지를 메모리로 가져온다. 이 과정은 메모리 사용을 최적화하고 필요한 리소스를 확보하는 데 도움을 준다.
- 페이지 단위로 데이터를 처리하기 때문에, RAM의 공간을 보다 효율적으로 사용할 수 있으며, 프로그램이 필요로 하는 만큼만 메모리를 로드할 수 있다. 이러한 방식은 전체 프로그램을 메모리에 올리지 않고도 프로그램이 실행될 수 있게 해준다.

#### 장점 
1. 효율적인 메모리 사용: 페이지 기법을 사용하면 메모리 조각화를 줄이고, 필요한 페이지만을 로드하여 시스템의 효율성을 높인다.
2. 보호 및 격리: 각 프로세스는 독립적인 가상 주소 공간을 가지므로, 다른 프로세스의 메모리에 접근하지 못하게 하여 보안을 강화한다.

> 즉, 페이징 기술은 전화번호부처럼 데이터를 효율적으로 관리하고 접근할 수 있도록 주소를 체계적으로 정리하는 방법이다. 이를 통해 메모리 사용의 효율성을 높이고, 프로세스 간의 격리를 보장한다.

![Paging1](images/Paging1.webp)

![Paging2](images/Paging2.png)